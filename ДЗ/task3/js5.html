<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Классы и функции</title>
</head>
<body>
    <script>
        /* 1. Напишите функцию JavaScript, которая проверяет, является ли переданная строка 
        палиндромом или нет (код из прошлой практической работы) */

        function palindrome(str){
            str.split('').reverse().join('')==str?alert('Это палиндром!'):alert('Это не палиндром!'); 
        }

        palindrome("abba");

        /* 2. Заменить отрицательные элементы в числовом массиве из n чисел (n>10) их квадратами, 
        оставив остальные без изменения (код из прошлой практической работы). */

        var arr = [1, -5, 3, -3, -4, 4];
        function changeNegNumbers(arr){

            for(i=0; i < arr.length; i++) {
                if (arr[i] < 0) {
                    arr[i] = arr[i]*arr[i];
                }
            }
            return arr;
        }

        alert(changeNegNumbers(arr));

        /* 3. Создайте класс, который будет сохранять в переменную имя пользователя и выводить его на 
        экран. Используйте его. Перепишите код с использованием синтаксиса класса 
        4. Создайте класс, который переворачивает ваше имя.*/

        class User {
            constructor(name){
                this.name = name;
            }

            showName(){
                alert(this.name);
            }

            showMessage(){
                alert("Привет, "+this.name);
            }

            reverseName(){
                alert(this.name.split('').reverse().join(''));
            }
        }

        let user = new User("Оля");
        user.showName();
        user.showMessage();
        user.reverseName();


        /* 5. Организовать в виде класса и функции симулятор, который выдает только три случайных значения – красный, черный и белый (0, 1, 2). Запустить симуляцию 1000 000 раз.
        Узнать, какая последовательность из красных, черных или белых значений была самой длинной. */

        class Simulator {

            constructor(){
                this.arr = [];
                for(i=0; i<=1000000; i++) {
                    this.arr.push(Math.floor(Math.random() * 3));
                }
            }

            count(color){
                var counter = 0;
                var max = 0;

                for (i=0; i<=this.arr.length; i++){
                    if (this.arr[i] == color) {
                        counter++;
                        if (counter > max) {
                            max = counter;
                        }
                    } else {
                        counter = 0;
                    }
                }
                return max;
            }
        }
    
        var sim = new Simulator();

        alert("Максимальное число раз выпадало красное (0): " + sim.count(0));
        alert("Максимальное число раз выпадало черное (1): " + sim.count(1));
        alert("Максимальное число раз выпадало белое (2): " + sim.count(2));

    </script>
</body>
</html>